(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e,t,a){e.exports=a(449)},253:function(e,t,a){},257:function(e,t,a){},385:function(e,t,a){},387:function(e,t,a){},449:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(66),c=a.n(s),u=(a(253),a(27)),i=a(28),l=a(30),o=a(29),m=a(31),h=a(462),d=a(459),p=a(470),b=a(469),f=a(22),v=a.n(f),E=a(42),g=a(53),y=a(471),C=a(466),_=a(465),O=a(450);a(257);var j=function(e){return r.a.createElement(C.a.Item,null,r.a.createElement("div",{className:"list-item",id:"userlist",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(O.a,{avatar:!0,src:"/images/user.png"})),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),e.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"user_id:"),e.user_id),r.a.createElement("div",null,r.a.createElement("b",null,"email:"),e.email),r.a.createElement("div",null,r.a.createElement("b",null,"created_at:"),e.created_at)))},w=a(472),k=a(473),P=a(460),U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.handleSearch()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"50%"},onKeyPress:this.handleKeyPress},r.a.createElement(w.a,null,r.a.createElement(k.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(d.a,{vertical:!0},"Or"),r.a.createElement(k.a.Row,{verticalAlign:"middle"},r.a.createElement(k.a.Column,null,r.a.createElement(y.a,{as:"h3"},"email"),r.a.createElement(P.a,{placeholder:"email",name:"email",icon:"search",value:this.props.searchParams.email,onChange:this.props.handleChange})),r.a.createElement(k.a.Column,null,r.a.createElement(y.a,{as:"h3"},"user_id"),r.a.createElement(P.a,{placeholder:"user_id",name:"user_id",icon:"search",value:this.props.searchParams.user_id,onChange:this.props.handleChange}))))))}}]),t}(n.Component),S=a(106),x=a.n(S),I={subscribers:{},subscribersNum:0,subscribe:function(e,t){I.subscribersNum++;var a=I.subscribers[e]||[],n=a.push({id:I.subscribersNum,fn:t});return I.subscribers[e]=a,n},unsubscribe:function(e){for(var t in I.subscribers)for(var a=I.subscribers[t],n=0,r=a.length;n<r;n++)if(a[n].id===e)return a[n]=!1,!0;return!1},publish:function(e,t){for(var a=I.subscribers[e]||[],n=0,r=a.length;n<r;n++)a[n]&&a[n].fn(t)}},L=I,D={subUsersListUpdate:function(e){return L.subscribe("newuser",e)},subsErroListUpdate:function(e){return L.subscribe("newerror",e)},eventUnsub:function(e){L.unsubscribe(e)},fetchUserList:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/users",{params:t});case 2:n=e.sent,a(n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),fetchErrorList:function(){var e=Object(E.a)(v.a.mark(function e(t,a,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/errors/"+t,{params:{page:a}});case 2:r=e.sent,n(r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),createErrorDoc:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/errors",t);case 2:n=e.sent,a(n),n.data.isNewUser&&L.publish("newuser"),L.publish("newerror",n.data.anonymous_id);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},A=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],usersCount:0,searchParams:{user_id:"",email:"",page:1}},a.userSubUpdateId=null,a.onItemClick=function(e){return function(){a.props.history.push({pathname:"/errorlist/"+e.anonymous_id,state:{user:e}})}},a.handleSearchChange=function(e){var t=Object(g.a)({},a.state.searchParams);t[e.target.name]=e.target.value,a.setState({searchParams:t})},a.searchUserByParams=function(){D.fetchUserList(Object(g.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})},a.componentDidMount=function(){var e=function(){return D.fetchUserList(Object(g.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})};e(),a.userSubUpdateId=D.subUsersListUpdate(e)},a.onPageChange=function(){var e=Object(E.a)(v.a.mark(function e(t,n){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,(s=Object(g.a)({},a.state.searchParams)).page=r,e.next=5,a.setState({searchParams:s});case 5:D.fetchUserList(Object(g.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.componentWillUnmount=function(){D.eventUnsub(a.userSubUpdateId)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.users,t=this.onItemClick,a=e.map(function(e){return r.a.createElement(j,Object.assign({},e,{key:e.anonymous_id,onItemClick:t(e)}))});return r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"User List"),r.a.createElement(U,{searchParams:this.state.searchParams,handleChange:this.handleSearchChange,handleSearch:this.searchUserByParams}),r.a.createElement(C.a,null,a),r.a.createElement(_.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.usersCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component),N=a(461),B=a(468);var W=function(e){var t="/images/".concat(e.err_type,".png"),a=r.a.createElement("div",{style:{flexGrow:"3",overflow:"hidden"}},r.a.createElement("b",null,"err_message:"),e.err_message);return r.a.createElement(C.a.Item,null,r.a.createElement("div",{className:"list-item",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(O.a,{avatar:!0,src:t})," ",e.created_at),r.a.createElement(B.a,{trigger:a,content:r.a.createElement("div",{style:{width:"500px",height:"auto",overflowWrap:"break-word",wordBreak:"break-all"}},e.err_message),position:"bottom center",on:"click",inverted:!0})))},M=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={errors:[],errorsDocCount:0,page:1},a.errorSubUpdateId=null,a.user={},a.componentDidMount=Object(E.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.user=a.props.history.location.state.user,t=a.props.match.params.anonymous_id,(n=function(e){e===t&&D.fetchErrorList(t,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})})})(t),a.errorSubUpdateId=D.subsErroListUpdate(n);case 5:case"end":return e.stop()}},e,this)})),a.componentWillUnmount=function(){D.eventUnsub(a.errorSubUpdateId)},a.onPageChange=function(){var e=Object(E.a)(v.a.mark(function e(t,n){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,e.next=3,a.setState({page:r});case 3:s=a.props.match.params.anonymous_id,D.fetchErrorList(s,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})});case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.errors.map(function(e){return r.a.createElement(W,Object.assign({},e,{key:e._id}))});return r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"Error List"),r.a.createElement(N.a,{to:"/userlist"},"Userlist"),r.a.createElement("div",{className:"list-item"},r.a.createElement("div",null,r.a.createElement(O.a,{avatar:!0,src:"/images/user.png"})),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),this.user.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"user_id:"),this.user.user_id),r.a.createElement("div",null,r.a.createElement("b",null,"email:"),this.user.email)),r.a.createElement(C.a,null,e),r.a.createElement(_.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.errorsDocCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component),K=(a(385),a(387),a(464)),J=a(467),z=a(463);var G=function(e){return r.a.createElement(z.a.Input,{fluid:!0,label:e.name,value:e.value,placeholder:e.name,name:e.name,onChange:e.handleChange})},R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){var t=Object(g.a)({},a.state);t[e.target.name]=e.target.value,a.setState(t)},a.handleSubmit=function(){var e={userParams:{anonymous_id:a.state.anonymous_id,email:a.state.email,user_id:a.state.user_id},err_type:a.state.err_type,err_message:a.state.err_message};D.createErrorDoc(e,function(e){200===e.status&&a.setState({anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""})})},a.state={anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(w.a,null,r.a.createElement(z.a,{onSubmit:this.handleSubmit},r.a.createElement(G,{name:"anonymous_id",value:this.state.anonymous_id,handleChange:this.handleChange}),r.a.createElement(G,{name:"err_type",value:this.state.err_type,handleChange:this.handleChange}),r.a.createElement(G,{name:"err_message",value:this.state.err_message,handleChange:this.handleChange}),r.a.createElement("hr",null),r.a.createElement(G,{name:"user_id",value:this.state.user_id,handleChange:this.handleChange}),r.a.createElement(G,{name:"email",value:this.state.email,handleChange:this.handleChange}),r.a.createElement(J.a,{type:"submit"},"Submit"))))}}]),t}(n.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(K.a,{trigger:r.a.createElement(J.a,null,"Create Error"),size:"tiny"},r.a.createElement(K.a.Content,{image:!0},r.a.createElement(R,null))))}}]),t}(n.Component),$=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(T,null),r.a.createElement(d.a,null),r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(b.a,{path:"/userlist",component:A}),r.a.createElement(b.a,{path:"/errorlist/:anonymous_id",component:M}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(446);c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[248,2,1]]]);
//# sourceMappingURL=main.74c32ed4.chunk.js.map