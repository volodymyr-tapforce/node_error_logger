(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{243:function(e,t,a){e.exports=a(444)},248:function(e,t,a){},252:function(e,t,a){},375:function(e,t,a){},377:function(e,t,a){},444:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(64),c=a.n(s),u=(a(248),a(25)),i=a(26),l=a(28),o=a(27),m=a(29),h=a(457),d=a(455),p=a(459),b=a(466),f=a(21),v=a.n(f),g=a(39),E=a(51),y=a(465),C=a(462),_=a(461),O=a(445);a(252);var j=function(e){return r.a.createElement(C.a.Item,null,r.a.createElement("div",{className:"list-item",id:"userlist",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(O.a,{avatar:!0,src:"/images/user.png"})),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),e.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"user_id:"),e.user_id),r.a.createElement("div",null,r.a.createElement("b",null,"email:"),e.email),r.a.createElement("div",null,r.a.createElement("b",null,"created_at:"),e.created_at)))},w=a(467),P=a(464),k=a(456),U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.handleSearch()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"50%"},onKeyPress:this.handleKeyPress},r.a.createElement(w.a,null,r.a.createElement(P.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(d.a,{vertical:!0},"Or"),r.a.createElement(P.a.Row,{verticalAlign:"middle"},r.a.createElement(P.a.Column,null,r.a.createElement(y.a,{as:"h3"},"email"),r.a.createElement(k.a,{placeholder:"email",name:"email",icon:"search",value:this.props.searchParams.email,onChange:this.props.handleChange})),r.a.createElement(P.a.Column,null,r.a.createElement(y.a,{as:"h3"},"user_id"),r.a.createElement(k.a,{placeholder:"user_id",name:"user_id",icon:"search",value:this.props.searchParams.user_id,onChange:this.props.handleChange}))))))}}]),t}(n.Component),S=a(103),I=a.n(S),x={subscribers:{},subscribersNum:0,subscribe:function(e,t){x.subscribersNum++;var a=x.subscribers[e]||[],n=a.push({id:x.subscribersNum,fn:t});return x.subscribers[e]=a,n},unsubscribe:function(e){for(var t in x.subscribers)for(var a=x.subscribers[t],n=0,r=a.length;n<r;n++)if(a[n].id===e)return a[n]=!1,!0;return!1},publish:function(e,t){for(var a=x.subscribers[e]||[],n=0,r=a.length;n<r;n++)a[n]&&a[n].fn(t)}},L=x,D={subUsersListUpdate:function(e){return L.subscribe("newuser",e)},subsErroListUpdate:function(e){return L.subscribe("newerror",e)},eventUnsub:function(e){L.unsubscribe(e)},fetchUserList:function(){var e=Object(g.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/users",{params:t});case 2:n=e.sent,a(n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),fetchErrorList:function(){var e=Object(g.a)(v.a.mark(function e(t,a,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/errors/"+t,{params:{page:a}});case 2:r=e.sent,n(r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),createErrorDoc:function(){var e=Object(g.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/api/errors",t);case 2:n=e.sent,a(n),n.data.isNewUser&&L.publish("newuser"),L.publish("newerror",n.data.anonymous_id);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},A=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],usersCount:0,searchParams:{user_id:"",email:"",page:1}},a.userSubUpdateId=null,a.onItemClick=function(e){return function(){a.props.history.push("/errorlist/"+e)}},a.handleSearchChange=function(e){var t=Object(E.a)({},a.state.searchParams);t[e.target.name]=e.target.value,a.setState({searchParams:t})},a.searchUserByParams=function(){D.fetchUserList(Object(E.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})},a.componentDidMount=function(){var e=function(){return D.fetchUserList(Object(E.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})};e(),a.userSubUpdateId=D.subUsersListUpdate(e)},a.onPageChange=function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,(s=Object(E.a)({},a.state.searchParams)).page=r,e.next=5,a.setState({searchParams:s});case 5:D.fetchUserList(Object(E.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.componentWillUnmount=function(){D.eventUnsub(a.userSubUpdateId)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.users,t=this.onItemClick,a=e.map(function(e){return r.a.createElement(j,Object.assign({},e,{key:e.anonymous_id,onItemClick:t(e.anonymous_id)}))});return r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"User List"),r.a.createElement(U,{searchParams:this.state.searchParams,handleChange:this.handleSearchChange,handleSearch:this.searchUserByParams}),r.a.createElement(C.a,null,a),r.a.createElement(_.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.usersCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component);var N=function(e){var t="error"===e.err_type?"/images/error.png":"/images/warning.png";return r.a.createElement(C.a.Item,null,r.a.createElement("div",{className:"list-item",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(O.a,{avatar:!0,src:t})),r.a.createElement("div",null,r.a.createElement("b",null,"err_type:"),e.err_type),r.a.createElement("div",null,r.a.createElement("b",null,"err_message:"),e.err_message),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),e.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"created_at:"),e.created_at)))},B=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={errors:[],errorsDocCount:0,page:1},a.errorSubUpdateId=null,a.componentDidMount=Object(g.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.match.params.anonymous_id,(n=function(e){e===t&&D.fetchErrorList(t,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})})})(t),a.errorSubUpdateId=D.subsErroListUpdate(n);case 4:case"end":return e.stop()}},e,this)})),a.componentWillUnmount=function(){D.eventUnsub(a.errorSubUpdateId)},a.onPageChange=function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,e.next=3,a.setState({page:r});case 3:s=a.props.match.params.anonymous_id,D.fetchErrorList(s,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})});case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.errors.map(function(e){return r.a.createElement(N,Object.assign({},e,{key:e._id}))});return r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"Error List"),r.a.createElement(C.a,null,e),r.a.createElement(_.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.errorsDocCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component),M=(a(375),a(377),a(460)),W=a(463),K=a(458);var J=function(e){return r.a.createElement(K.a.Input,{fluid:!0,label:e.name,value:e.value,placeholder:e.name,name:e.name,onChange:e.handleChange})},z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){var t=Object(E.a)({},a.state);t[e.target.name]=e.target.value,a.setState(t)},a.handleSubmit=function(){var e={userParams:{anonymous_id:a.state.anonymous_id,email:a.state.email,user_id:a.state.user_id},err_type:a.state.err_type,err_message:a.state.err_message};D.createErrorDoc(e,function(e){200===e.status&&a.setState({anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""})})},a.state={anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(w.a,null,r.a.createElement(K.a,{onSubmit:this.handleSubmit},r.a.createElement(J,{name:"anonymous_id",value:this.state.anonymous_id,handleChange:this.handleChange}),r.a.createElement(J,{name:"err_type",value:this.state.err_type,handleChange:this.handleChange}),r.a.createElement(J,{name:"err_message",value:this.state.err_message,handleChange:this.handleChange}),r.a.createElement("hr",null),r.a.createElement(J,{name:"user_id",value:this.state.user_id,handleChange:this.handleChange}),r.a.createElement(J,{name:"email",value:this.state.email,handleChange:this.handleChange}),r.a.createElement(W.a,{type:"submit"},"Submit"))))}}]),t}(n.Component),R=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(M.a,{trigger:r.a.createElement(W.a,null,"Create Error"),size:"tiny"},r.a.createElement(M.a.Content,{image:!0},r.a.createElement(z,null))))}}]),t}(n.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(R,null),r.a.createElement(d.a,null),r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(b.a,{path:"/userlist",component:A}),r.a.createElement(b.a,{path:"/errorlist/:anonymous_id",component:B}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(441);c.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[243,2,1]]]);
//# sourceMappingURL=main.a524b50b.chunk.js.map