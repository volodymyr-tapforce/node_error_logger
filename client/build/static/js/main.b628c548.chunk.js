(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,a){e.exports=a(450)},254:function(e,t,a){},258:function(e,t,a){},386:function(e,t,a){},388:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(64),c=a.n(s),u=(a(254),a(28)),i=a(29),l=a(31),o=a(30),m=a(32),h=a(463),d=a(460),p=a(471),b=a(474),f=a(476),v=a(23),E=a.n(v),g=a(43),y=a(177),C=a(470),_=a(467),O=a(466),j=a(451);a(258);var w=function(e){return r.a.createElement(_.a.Item,null,r.a.createElement("div",{className:"list-item",id:"userlist",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(j.a,{avatar:!0,src:"/images/user.png"})),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),e.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"user_id:"),e.user_id),r.a.createElement("div",null,r.a.createElement("b",null,"email:"),e.email),r.a.createElement("div",null,r.a.createElement("b",null,"created_at:"),e.created_at)))},k=a(469),P=a(473),U=a(461),S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.handleSearch()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"50%"},onKeyPress:this.handleKeyPress},r.a.createElement(k.a,null,r.a.createElement(P.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(d.a,{vertical:!0},"Or"),r.a.createElement(P.a.Row,{verticalAlign:"middle"},r.a.createElement(P.a.Column,null,r.a.createElement(C.a,{as:"h3"},"email"),r.a.createElement(U.a,{placeholder:"email",name:"email",icon:"search",value:this.props.searchParams.email,onChange:this.props.handleChange})),r.a.createElement(P.a.Column,null,r.a.createElement(C.a,{as:"h3"},"user_id"),r.a.createElement(U.a,{placeholder:"user_id",name:"user_id",icon:"search",value:this.props.searchParams.user_id,onChange:this.props.handleChange}))))))}}]),t}(n.Component),x=a(182),I=a.n(x),L={subscribers:{},subscribersNum:0,subscribe:function(e,t){L.subscribersNum++;var a=L.subscribers[e]||[],n=a.push({id:L.subscribersNum,fn:t});return L.subscribers[e]=a,n},unsubscribe:function(e){for(var t in L.subscribers)for(var a=L.subscribers[t],n=0,r=a.length;n<r;n++)if(a[n].id===e)return a[n]=!1,!0;return!1},publish:function(e,t){for(var a=L.subscribers[e]||[],n=0,r=a.length;n<r;n++)a[n]&&a[n].fn(t)}},D=L,A={subUsersListUpdate:function(e){return D.subscribe("newuser",e)},subsErroListUpdate:function(e){return D.subscribe("newerror",e)},eventUnsub:function(e){D.unsubscribe(e)},fetchUserList:function(){var e=Object(g.a)(E.a.mark(function e(t,a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/users",{params:t});case 2:n=e.sent,a(n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),fetchErrorList:function(){var e=Object(g.a)(E.a.mark(function e(t,a,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/errors/"+t,{params:{page:a}});case 2:r=e.sent,n(r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),createErrorDoc:function(){var e=Object(g.a)(E.a.mark(function e(t,a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/api/errors",t);case 2:n=e.sent,a(n),n.data.isNewUser&&D.publish("newuser"),D.publish("newerror",n.data.anonymous_id);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},N=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],usersCount:0,searchParams:{user_id:"",email:"",page:1}},a.userSubUpdateId=null,a.onItemClick=function(e){return function(){a.props.history.push({pathname:"/errorlist/"+e.anonymous_id,state:{user:e}})}},a.handleSearchChange=function(e){var t=Object(y.a)({},a.state.searchParams);t[e.target.name]=e.target.value,a.setState({searchParams:t})},a.searchUserByParams=function(){A.fetchUserList(Object(y.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})},a.componentDidMount=function(){var e=function(){return A.fetchUserList(Object(y.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})})};e(),a.userSubUpdateId=A.subUsersListUpdate(e)},a.onPageChange=function(){var e=Object(g.a)(E.a.mark(function e(t,n){var r,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,(s=Object(y.a)({},a.state.searchParams)).page=r,e.next=5,a.setState({searchParams:s});case 5:A.fetchUserList(Object(y.a)({},a.state.searchParams),function(e){a.setState({users:e.users,usersCount:e.usersCount})});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.componentWillUnmount=function(){A.eventUnsub(a.userSubUpdateId)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.users,t=this.onItemClick,a=e.map(function(e){return r.a.createElement(w,Object.assign({},e,{key:e.anonymous_id,onItemClick:t(e)}))});return r.a.createElement("div",null,r.a.createElement(C.a,{as:"h2"},"User List"),r.a.createElement(S,{searchParams:this.state.searchParams,handleChange:this.handleSearchChange,handleSearch:this.searchUserByParams}),r.a.createElement(_.a,null,a),r.a.createElement(O.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.usersCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component),B=a(462),W=a(472);var M=function(e){var t="/images/".concat(e.err_type,".png"),a=r.a.createElement("div",{style:{flexGrow:"3",overflow:"hidden"}},r.a.createElement("b",null,"err_message:"),e.err_message);return r.a.createElement(_.a.Item,null,r.a.createElement("div",{className:"list-item",onClick:e.onItemClick},r.a.createElement("div",null,r.a.createElement(j.a,{avatar:!0,src:t})," ",e.created_at),r.a.createElement(W.a,{trigger:a,content:r.a.createElement("div",{style:{width:"500px",height:"auto",overflowWrap:"break-word",wordBreak:"break-all"}},e.err_message),position:"bottom center",on:"click",inverted:!0})))},K=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={errors:[],errorsDocCount:0,page:1},a.errorSubUpdateId=null,a.user={},a.componentDidMount=Object(g.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.user=a.props.history.location.state.user,t=a.props.match.params.anonymous_id,(n=function(e){e===t&&A.fetchErrorList(t,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})})})(t),a.errorSubUpdateId=A.subsErroListUpdate(n);case 5:case"end":return e.stop()}},e,this)})),a.componentWillUnmount=function(){A.eventUnsub(a.errorSubUpdateId)},a.onPageChange=function(){var e=Object(g.a)(E.a.mark(function e(t,n){var r,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.activePage,e.next=3,a.setState({page:r});case 3:s=a.props.match.params.anonymous_id,A.fetchErrorList(s,a.state.page,function(e){a.setState({errors:e.errorDocs,errorsDocCount:e.errorsCount})});case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.errors.map(function(e){return r.a.createElement(M,Object.assign({},e,{key:e._id}))});return r.a.createElement("div",null,r.a.createElement(C.a,{as:"h2"},"Error List"),r.a.createElement(B.a,{to:"/userlist"},"Userlist"),r.a.createElement("div",{className:"list-item"},r.a.createElement("div",null,r.a.createElement(j.a,{avatar:!0,src:"/images/user.png"})),r.a.createElement("div",null,r.a.createElement("b",null,"anonymous_id:"),this.user.anonymous_id),r.a.createElement("div",null,r.a.createElement("b",null,"user_id:"),this.user.user_id),r.a.createElement("div",null,r.a.createElement("b",null,"email:"),this.user.email)),r.a.createElement(_.a,null,e),r.a.createElement(O.a,{defaultActivePage:1,totalPages:Math.ceil(this.state.errorsDocCount/10),onPageChange:this.onPageChange}))}}]),t}(n.Component),J=(a(386),a(388),a(465)),z=a(468),G=a(464);var R=function(e){return r.a.createElement(G.a.Input,{fluid:!0,label:e.name,value:e.value,placeholder:e.name,name:e.name,onChange:e.handleChange})},T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){var t=Object(y.a)({},a.state);t[e.target.name]=e.target.value,a.setState(t)},a.handleSubmit=function(){var e={userParams:{anonymous_id:a.state.anonymous_id,email:a.state.email,user_id:a.state.user_id},err_type:a.state.err_type,err_message:a.state.err_message};A.createErrorDoc(e,function(e){200===e.status&&a.setState({anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""})})},a.state={anonymous_id:"",err_type:"",err_message:"",email:"",user_id:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(k.a,null,r.a.createElement(G.a,{onSubmit:this.handleSubmit},r.a.createElement(R,{name:"anonymous_id",value:this.state.anonymous_id,handleChange:this.handleChange}),r.a.createElement(R,{name:"err_type",value:this.state.err_type,handleChange:this.handleChange}),r.a.createElement(R,{name:"err_message",value:this.state.err_message,handleChange:this.handleChange}),r.a.createElement("hr",null),r.a.createElement(R,{name:"user_id",value:this.state.user_id,handleChange:this.handleChange}),r.a.createElement(R,{name:"email",value:this.state.email,handleChange:this.handleChange}),r.a.createElement(z.a,{type:"submit"},"Submit"))))}}]),t}(n.Component),$=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(J.a,{trigger:r.a.createElement(z.a,null,"Create Error"),size:"tiny"},r.a.createElement(J.a.Content,{image:!0},r.a.createElement(T,null))))}}]),t}(n.Component),q=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement($,null),r.a.createElement(d.a,null),r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(f.a,{path:"/userlist",component:N}),r.a.createElement(f.a,{path:"/errorlist/:anonymous_id",component:K}),r.a.createElement(f.a,{component:N})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(447);c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[249,2,1]]]);
//# sourceMappingURL=main.b628c548.chunk.js.map